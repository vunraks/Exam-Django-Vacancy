{% extends 'base.html' %}
{% load static %}

{% block title %}Вход в систему - Поиск вакансий{% endblock %}

{% block content %}
<div class="form-container">
    <div class="form-card">
        <h2>Вход в систему </h2>
        
        {% if messages %}
            {% for message in messages %}
                <div class="alert {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
        
        <form method="post" class="profile-form">
            {% csrf_token %}
            
            {% if form.errors %}
                <div class="alert error">
                    Неверное имя пользователя или пароль. Пожалуйста, попробуйте еще раз.
                </div>
            {% endif %}
            
            <div class="form-group">
                <label for="id_username">Имя пользователя:</label>
                {{ form.username }}
                {% if form.username.errors %}
                    <div class="error-text">{{ form.username.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="id_password">Пароль:</label>
                {{ form.password }}
                {% if form.password.errors %}
                    <div class="error-text">{{ form.password.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn-save">
                    <span class="btn-icon"></span>
                    Войти
                </button>
                <a href="{% url 'register' %}" class="button-clear">
                    <span class="btn-icon"></span>
                    Регистрация
                </a>
            </div>
            
            <div class="form-links">
                <p>
                    <a href="{% url 'home_page' %}">← На главную</a>
                    <span style="margin: 0 10px;">•</span>
                </p>
            </div>
        </form>
    </div>
</div>

<script>
    // Добавляем интерактивность форме
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('.profile-form');
        const inputs = form.querySelectorAll('input');
        
        // Подсветка активного поля
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('active');
            });
            
            input.addEventListener('blur', function() {
                if (!this.value) {
                    this.parentElement.classList.remove('active');
                }
            });
        });
        
        // Валидация перед отправкой
        form.addEventListener('submit', function(e) {
            let isValid = true;
            const submitBtn = this.querySelector('button[type="submit"]');
            
            // Проверяем заполнение полей
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    input.style.borderColor = '#dc3545';
                    input.style.boxShadow = '0 0 0 3px rgba(220, 53, 69, 0.1)';
                    isValid = false;
                } else {
                    input.style.borderColor = '#28a745';
                    input.style.boxShadow = '0 0 0 3px rgba(40, 167, 69, 0.1)';
                }
            });
            
            if (!isValid) {
                e.preventDefault();
                alert('Пожалуйста, заполните все поля');
                return false;
            }
            
            // Анимация загрузки
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span class="btn-icon">⏳</span> Входим...';
            submitBtn.disabled = true;
            
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 3000);
        });
    });
</script>
{% endblock %}