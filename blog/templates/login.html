{% extends 'base.html' %}
{% load static %}

{% block title %}–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É - –ü–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π{% endblock %}

{% block content %}
<div class="form-container">
    <div class="form-card">
        <h2>üîë –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É </h2>
        
        {% if messages %}
            {% for message in messages %}
                <div class="alert {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
        
        <form method="post" class="profile-form">
            {% csrf_token %}
            
            {% if form.errors %}
                <div class="alert error">
                    –ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.
                </div>
            {% endif %}
            
            <div class="form-group">
                <label for="id_username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                {{ form.username }}
                {% if form.username.errors %}
                    <div class="error-text">{{ form.username.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="id_password">–ü–∞—Ä–æ–ª—å:</label>
                {{ form.password }}
                {% if form.password.errors %}
                    <div class="error-text">{{ form.password.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn-save">
                    <span class="btn-icon">üîë</span>
                    –í–æ–π—Ç–∏
                </button>
                <a href="{% url 'register' %}" class="button-clear">
                    <span class="btn-icon">üìù</span>
                    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                </a>
            </div>
            
            <div class="form-links">
                <p>
                    <a href="{% url 'home_page' %}">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                    <span style="margin: 0 10px;">‚Ä¢</span>
                </p>
            </div>
        </form>
    </div>
</div>

<script>
    // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–µ
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('.profile-form');
        const inputs = form.querySelectorAll('input');
        
        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª—è
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('active');
            });
            
            input.addEventListener('blur', function() {
                if (!this.value) {
                    this.parentElement.classList.remove('active');
                }
            });
        });
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
        form.addEventListener('submit', function(e) {
            let isValid = true;
            const submitBtn = this.querySelector('button[type="submit"]');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    input.style.borderColor = '#dc3545';
                    input.style.boxShadow = '0 0 0 3px rgba(220, 53, 69, 0.1)';
                    isValid = false;
                } else {
                    input.style.borderColor = '#28a745';
                    input.style.boxShadow = '0 0 0 3px rgba(40, 167, 69, 0.1)';
                }
            });
            
            if (!isValid) {
                e.preventDefault();
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return false;
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span class="btn-icon">‚è≥</span> –í—Ö–æ–¥–∏–º...';
            submitBtn.disabled = true;
            
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 3000);
        });
    });
</script>
{% endblock %}